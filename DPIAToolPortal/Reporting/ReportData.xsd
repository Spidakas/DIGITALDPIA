<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="ReportData" targetNamespace="http://tempuri.org/ReportData.xsd" xmlns:mstns="http://tempuri.org/ReportData.xsd" xmlns="http://tempuri.org/ReportData.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="QueriesTableAdapter" GeneratorFunctionsComponentClassName="QueriesTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" UserFunctionsComponentName="QueriesTableAdapter" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="MySettings" AppSettingsPropertyName="csISPData" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="csISPData (MySettings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.InformationSharingPortal.My.MySettings.GlobalReference.Default.csISPData" Provider="System.Data.SqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="SharingPartnersTableAdapter" GeneratorDataComponentClassName="SharingPartnersTableAdapter" Name="SharingPartners" UserDataComponentName="SharingPartnersTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="csISPData (MySettings)" DbObjectType="Unknown" GenerateMethods="Get" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="GetData">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        'ORG' + RIGHT('000000' + CAST(org.OrganisationID AS VARCHAR(6)), 6) AS ISGID, org.OrganisationName, org.OrganisationAddress, COALESCE (org.ICORegistrationNumber, 'N/A') AS ICONum, 
                         CASE OrganisationTypeID WHEN 1 THEN 'Lead' ELSE 'Sponsored' END AS Type, dbo.GetFlows_MyOrg_TheirOrg(@OrganisationID, org.OrganisationID) AS Flows, 
                         CASE COALESCE (dbo.getAssuranceScoreForOrganisationID(org.OrganisationID), - 1) WHEN 2 THEN 'None' WHEN 1 THEN 'Limited' WHEN 0 THEN 'Significant' WHEN - 10 THEN 'Expired' ELSE 'Not Submitted' END AS Assurance,
                          dfs.DFPurpose, [is].InformationSharedText
FROM            isp_DF_Organisations AS dfo INNER JOIN
                         isp_Organisations AS org ON dfo.OrganisationID = org.OrganisationID INNER JOIN
                         isp_DF_InformationShared AS dfi INNER JOIN
                         isp_DataFlowSummaries AS dfs ON dfi.DataFlowID = dfs.DataFlowID INNER JOIN
                         isp_InformationShared AS [is] ON dfi.InformationSharedID = [is].InformationSharedID INNER JOIN
                         isp_DF_OrganisationGroups AS dfog ON dfs.DataFlowID = dfog.DataFlowID ON dfo.DF_OrgGroupID = dfog.DF_OrgGroupID
WHERE        (org.InactivatedDate IS NULL) AND (org.OrganisationID &lt;&gt; @OrganisationID)
GROUP BY org.OrganisationID, org.OrganisationName, org.OrganisationAddress, COALESCE (org.ICORegistrationNumber, 'N/A'), dbo.GetFlows_MyOrg_TheirOrg(@OrganisationID, org.OrganisationID), dfs.DFPurpose, 
                         [is].InformationSharedText, CASE OrganisationTypeID WHEN 1 THEN 'Lead' ELSE 'Sponsored' END, CASE COALESCE (org.AssuranceScore, - 1) 
                         WHEN 2 THEN 'None' WHEN 1 THEN 'Limited' WHEN 0 THEN 'Significant' ELSE 'Not Submitted' END
HAVING        (dbo.GetFlows_MyOrg_TheirOrg(@OrganisationID, org.OrganisationID) &gt; 0)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="OrganisationID" ColumnName="OrganisationID" DataSourceName="ispdata.dbo.isp_Organisations" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@OrganisationID" Precision="0" Scale="0" Size="4" SourceColumn="OrganisationID" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="ISGID" DataSetColumn="ISGID" />
              <Mapping SourceColumn="OrganisationName" DataSetColumn="OrganisationName" />
              <Mapping SourceColumn="OrganisationAddress" DataSetColumn="OrganisationAddress" />
              <Mapping SourceColumn="ICONum" DataSetColumn="ICONum" />
              <Mapping SourceColumn="Type" DataSetColumn="Type" />
              <Mapping SourceColumn="Flows" DataSetColumn="Flows" />
              <Mapping SourceColumn="Assurance" DataSetColumn="Assurance" />
              <Mapping SourceColumn="DFPurpose" DataSetColumn="DFPurpose" />
              <Mapping SourceColumn="InformationSharedText" DataSetColumn="InformationSharedText" />
            </Mappings>
            <Sources />
          </TableAdapter>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="isp_DataAssetInventoryTableAdapter" GeneratorDataComponentClassName="isp_DataAssetInventoryTableAdapter" Name="isp_DataAssetInventory" UserDataComponentName="isp_DataAssetInventoryTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="csISPData (MySettings)" DbObjectName="ispdata.dbo.isp_DataAssetInventory" DbObjectType="Table" GenerateMethods="Get" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="GetData">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        DataAssetID, 'DA' + RIGHT('000000' + CAST(DataAssetID AS VARCHAR(6)), 6) AS ISGID, DataAssetName, DataAssetDescription, UniqueReference,
                             (SELECT        TOP (1) dac.ContactName
                               FROM            isp_DataAssetContacts AS dac INNER JOIN
                                                         isp_DataAssetContactGroups AS dacg ON dac.DataAssetContactGroupID = dacg.DataAssetContactGroupID
                               WHERE        (dac.IsIAO = 1) AND (dacg.DataAssetID = DAI.DataAssetID)) AS IAOEmail, AddedDate, dbo.DataAsset_DataTypes_SELECT_CSV(DataAssetID) AS DataTypes, dbo.DataAsset_DataSubjects_SELECT_CSV(DataAssetID) 
                         AS Subjects, dbo.DataAsset_DataFormats_SELECT_CSV(DataAssetID) AS Formats, Active,
                             (SELECT        COUNT(f.FileID) AS Files
                               FROM            isp_FileGroupFiles AS f INNER JOIN
                                                         isp_FileGroups AS fg ON f.FileGroupID = fg.FileGroupID
                               WHERE        (fg.GroupType = N'assetfiles') AND (fg.ID = DAI.DataAssetID)) AS AssetFiles
FROM            isp_DataAssetInventory AS DAI
WHERE        (OrganisationID = @OrganisationID) AND (Active = 1) OR
                         (OrganisationID = @OrganisationID) AND (CAST(@IncludeInactive AS Bit) = 1)
ORDER BY DataAssetName</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="OrganisationID" ColumnName="OrganisationID" DataSourceName="ispdata.dbo.isp_DataAssetInventory" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@OrganisationID" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="OrganisationID" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="IncludeInactive" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="Boolean" Direction="Input" ParameterName="@IncludeInactive" Precision="0" ProviderType="Bit" Scale="0" Size="1024" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="DataAssetID" DataSetColumn="DataAssetID" />
              <Mapping SourceColumn="ISGID" DataSetColumn="ISGID" />
              <Mapping SourceColumn="DataAssetName" DataSetColumn="DataAssetName" />
              <Mapping SourceColumn="DataAssetDescription" DataSetColumn="DataAssetDescription" />
              <Mapping SourceColumn="UniqueReference" DataSetColumn="UniqueReference" />
              <Mapping SourceColumn="AddedDate" DataSetColumn="AddedDate" />
              <Mapping SourceColumn="DataTypes" DataSetColumn="DataTypes" />
              <Mapping SourceColumn="Subjects" DataSetColumn="Subjects" />
              <Mapping SourceColumn="Formats" DataSetColumn="Formats" />
              <Mapping SourceColumn="IAOEmail" DataSetColumn="IAOEmail" />
              <Mapping SourceColumn="Active" DataSetColumn="Active" />
              <Mapping SourceColumn="AssetFiles" DataSetColumn="AssetFiles" />
            </Mappings>
            <Sources />
          </TableAdapter>
        </Tables>
        <Sources>
          <DbSource ConnectionRef="csISPData (MySettings)" DbObjectName="ispdata.dbo.isp_Organisations" DbObjectType="Table" GenerateShortCommands="true" GeneratorSourceName="GetOrganisationName" MethodsParameterType="CLR" Modifier="Public" Name="GetOrganisationName" QueryType="Scalar" ScalarCallRetval="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy" UserSourceName="GetOrganisationName">
            <SelectCommand>
              <DbCommand CommandType="Text" ModifiedByUser="true">
                <CommandText>SELECT OrganisationName FROM isp_Organisations WHERE OrganisationID = @OrganisationID</CommandText>
                <Parameters>
                  <Parameter AllowDbNull="false" AutogeneratedName="OrganisationID" ColumnName="OrganisationID" DataSourceName="ispdata.dbo.isp_Organisations" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@OrganisationID" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="OrganisationID" SourceColumnNullMapping="false" SourceVersion="Current" />
                </Parameters>
              </DbCommand>
            </SelectCommand>
          </DbSource>
        </Sources>
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="ReportData" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="ReportData" msprop:Generator_UserDSName="ReportData">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="SharingPartners" msprop:Generator_TableClassName="SharingPartnersDataTable" msprop:Generator_TableVarName="tableSharingPartners" msprop:Generator_TablePropName="SharingPartners" msprop:Generator_RowDeletingName="SharingPartnersRowDeleting" msprop:Generator_RowChangingName="SharingPartnersRowChanging" msprop:Generator_RowEvHandlerName="SharingPartnersRowChangeEventHandler" msprop:Generator_RowDeletedName="SharingPartnersRowDeleted" msprop:Generator_UserTableName="SharingPartners" msprop:Generator_RowChangedName="SharingPartnersRowChanged" msprop:Generator_RowEvArgName="SharingPartnersRowChangeEvent" msprop:Generator_RowClassName="SharingPartnersRow">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ISGID" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnISGID" msprop:Generator_ColumnPropNameInRow="ISGID" msprop:Generator_ColumnPropNameInTable="ISGIDColumn" msprop:Generator_UserColumnName="ISGID" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="9" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="OrganisationName" msprop:Generator_ColumnVarNameInTable="columnOrganisationName" msprop:Generator_ColumnPropNameInRow="OrganisationName" msprop:Generator_ColumnPropNameInTable="OrganisationNameColumn" msprop:Generator_UserColumnName="OrganisationName">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="255" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="OrganisationAddress" msprop:Generator_ColumnVarNameInTable="columnOrganisationAddress" msprop:Generator_ColumnPropNameInRow="OrganisationAddress" msprop:Generator_ColumnPropNameInTable="OrganisationAddressColumn" msprop:Generator_UserColumnName="OrganisationAddress">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="500" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="ICONum" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnICONum" msprop:Generator_ColumnPropNameInRow="ICONum" msprop:Generator_ColumnPropNameInTable="ICONumColumn" msprop:Generator_UserColumnName="ICONum" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Type" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnType" msprop:Generator_ColumnPropNameInRow="Type" msprop:Generator_ColumnPropNameInTable="TypeColumn" msprop:Generator_UserColumnName="Type" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="9" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Flows" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnFlows" msprop:Generator_ColumnPropNameInRow="Flows" msprop:Generator_ColumnPropNameInTable="FlowsColumn" msprop:Generator_UserColumnName="Flows" type="xs:int" minOccurs="0" />
              <xs:element name="Assurance" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnAssurance" msprop:Generator_ColumnPropNameInRow="Assurance" msprop:Generator_ColumnPropNameInTable="AssuranceColumn" msprop:Generator_UserColumnName="Assurance" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="13" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="DFPurpose" msprop:Generator_ColumnVarNameInTable="columnDFPurpose" msprop:Generator_ColumnPropNameInRow="DFPurpose" msprop:Generator_ColumnPropNameInTable="DFPurposeColumn" msprop:Generator_UserColumnName="DFPurpose" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="2500" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="InformationSharedText" msprop:Generator_ColumnVarNameInTable="columnInformationSharedText" msprop:Generator_ColumnPropNameInRow="InformationSharedText" msprop:Generator_ColumnPropNameInTable="InformationSharedTextColumn" msprop:Generator_UserColumnName="InformationSharedText">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="100" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="isp_DataAssetInventory" msprop:Generator_TableClassName="isp_DataAssetInventoryDataTable" msprop:Generator_TableVarName="tableisp_DataAssetInventory" msprop:Generator_TablePropName="isp_DataAssetInventory" msprop:Generator_RowDeletingName="isp_DataAssetInventoryRowDeleting" msprop:Generator_RowChangingName="isp_DataAssetInventoryRowChanging" msprop:Generator_RowEvHandlerName="isp_DataAssetInventoryRowChangeEventHandler" msprop:Generator_RowDeletedName="isp_DataAssetInventoryRowDeleted" msprop:Generator_UserTableName="isp_DataAssetInventory" msprop:Generator_RowChangedName="isp_DataAssetInventoryRowChanged" msprop:Generator_RowEvArgName="isp_DataAssetInventoryRowChangeEvent" msprop:Generator_RowClassName="isp_DataAssetInventoryRow">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="DataAssetID" msdata:ReadOnly="true" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="-1" msdata:AutoIncrementStep="-1" msprop:Generator_ColumnVarNameInTable="columnDataAssetID" msprop:Generator_ColumnPropNameInRow="DataAssetID" msprop:Generator_ColumnPropNameInTable="DataAssetIDColumn" msprop:Generator_UserColumnName="DataAssetID" type="xs:int" />
              <xs:element name="ISGID" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnISGID" msprop:Generator_ColumnPropNameInRow="ISGID" msprop:Generator_ColumnPropNameInTable="ISGIDColumn" msprop:Generator_UserColumnName="ISGID" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="8" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="DataAssetName" msprop:Generator_ColumnVarNameInTable="columnDataAssetName" msprop:Generator_ColumnPropNameInRow="DataAssetName" msprop:Generator_ColumnPropNameInTable="DataAssetNameColumn" msprop:Generator_UserColumnName="DataAssetName">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="100" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="DataAssetDescription" msprop:Generator_ColumnVarNameInTable="columnDataAssetDescription" msprop:Generator_ColumnPropNameInRow="DataAssetDescription" msprop:Generator_ColumnPropNameInTable="DataAssetDescriptionColumn" msprop:Generator_UserColumnName="DataAssetDescription" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="2147483647" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="UniqueReference" msprop:Generator_ColumnVarNameInTable="columnUniqueReference" msprop:Generator_ColumnPropNameInRow="UniqueReference" msprop:Generator_ColumnPropNameInTable="UniqueReferenceColumn" msprop:Generator_UserColumnName="UniqueReference" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="100" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="AddedDate" msprop:Generator_ColumnVarNameInTable="columnAddedDate" msprop:Generator_ColumnPropNameInRow="AddedDate" msprop:Generator_ColumnPropNameInTable="AddedDateColumn" msprop:Generator_UserColumnName="AddedDate" type="xs:dateTime" />
              <xs:element name="DataTypes" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnDataTypes" msprop:Generator_ColumnPropNameInRow="DataTypes" msprop:Generator_ColumnPropNameInTable="DataTypesColumn" msprop:Generator_UserColumnName="DataTypes" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="8000" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Subjects" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnSubjects" msprop:Generator_ColumnPropNameInRow="Subjects" msprop:Generator_ColumnPropNameInTable="SubjectsColumn" msprop:Generator_UserColumnName="Subjects" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="8000" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Formats" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnFormats" msprop:Generator_ColumnPropNameInRow="Formats" msprop:Generator_ColumnPropNameInTable="FormatsColumn" msprop:Generator_UserColumnName="Formats" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="8000" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="IAOEmail" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnIAOEmail" msprop:Generator_ColumnPropNameInRow="IAOEmail" msprop:Generator_ColumnPropNameInTable="IAOEmailColumn" msprop:Generator_UserColumnName="IAOEmail" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Active" msprop:Generator_ColumnVarNameInTable="columnActive" msprop:Generator_ColumnPropNameInRow="Active" msprop:Generator_ColumnPropNameInTable="ActiveColumn" msprop:Generator_UserColumnName="Active" type="xs:boolean" />
              <xs:element name="AssetFiles" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnAssetFiles" msprop:Generator_ColumnPropNameInRow="AssetFiles" msprop:Generator_ColumnPropNameInTable="AssetFilesColumn" msprop:Generator_UserColumnName="AssetFiles" type="xs:int" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
    <xs:unique name="Constraint1" msdata:PrimaryKey="true">
      <xs:selector xpath=".//mstns:isp_DataAssetInventory" />
      <xs:field xpath="mstns:DataAssetID" />
    </xs:unique>
  </xs:element>
</xs:schema>